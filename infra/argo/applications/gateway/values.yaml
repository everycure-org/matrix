
external-dns:
  # Schedule External DNS on management nodes
  nodeSelector:
    workload-type: management
  podLabels:
    cost-center: infrastructure-management
    workload-category: platform-services
    service-tier: management
    billing-category: infrastructure
    component: external-dns
  provider:
    name: google
  extraArgs:
    - --source=gateway-httproute
    - --source=ingress
  rbac:
    additionalPermissions:
      - apiGroups: ["gateway.networking.k8s.io"]
        resources: ["gateways","httproutes","grpcroutes","tlsroutes","tcproutes","udproutes"] 
        verbs: ["get","watch","list"]
      - apiGroups: [""]
        resources: ["namespaces"]
        verbs: ["get","watch","list"]
      - apiGroups: ["networking.k8s.io"]
        resources: ["ingresses"]
        verbs: ["get","watch","list"]

cert-manager:
  # Schedule cert-manager on management nodes
  nodeSelector:
    workload-type: management
  podLabels:
    cost-center: infrastructure-management
    workload-category: platform-services
    service-tier: management
    billing-category: infrastructure
    component: cert-manager
  # Schedule webhook on management nodes
  webhook:
    nodeSelector:
      workload-type: management
    podLabels:
      cost-center: infrastructure-management
      workload-category: platform-services
      service-tier: management
      billing-category: infrastructure
      component: cert-manager-webhook
  # Schedule cainjector on management nodes
  cainjector:
    nodeSelector:
      workload-type: management
    podLabels:
      cost-center: infrastructure-management
      workload-category: platform-services
      service-tier: management
      billing-category: infrastructure
      component: cert-manager-cainjector
  crds:
    enabled: true
    keep: false # potentially dangerous to remove them but for now trying to keep ArgoCD fully owning this

  config:
    apiVersion: controller.config.cert-manager.io/v1alpha1
    kind: ControllerConfiguration
    # https://cert-manager.io/docs/usage/gateway/
    enableGatewayAPI: true