gha-runner-scale-set-controller:
  # Controller Configuration
  replicaCount: 1

  image:
    repository: ghcr.io/actions/actions-runner-controller
    tag: "0.9.3"
    pullPolicy: IfNotPresent

  # Schedule on management nodes
  nodeSelector:
    workload-type: management

  # Tolerate management node taints
  tolerations:
    - key: workload-type
      operator: Equal
      value: management
      effect: NoSchedule

  # Resource requests for the controller
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  # Security context
  securityContext:
    runAsNonRoot: true
    runAsUser: 1001
    runAsGroup: 1001
    fsGroup: 1001

  podSecurityContext:
    runAsNonRoot: true
    runAsUser: 1001
    runAsGroup: 1001
    fsGroup: 1001

  # Service account
  serviceAccount:
    create: true
    annotations: {}
    name: ""

  # RBAC
  rbac:
    create: true

  # Metrics
  metrics:
    controllerManagerAddr: ":8080"
    bindAddr: ":8080"
    enableLeaderElection: true

  # Logging
  logLevel: info
  logFormat: text

  # Add billing labels for cost tracking
  podLabels:
    cost-center: infrastructure-management
    workload-category: platform-services
    service-tier: management
    billing-category: infrastructure
    component: actions-runner-controller

  # Pod annotations for monitoring
  podAnnotations:
    cluster-autoscaler.kubernetes.io/safe-to-evict: "true"
