apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: litellm-master-key-secret
  namespace: litellm
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: gcp-store
    kind: ClusterSecretStore
  target:
    name: litellm-master-key
    creationPolicy: 'Owner'
    template:
      type: Opaque
      data:
        LITELLM_MASTER_KEY: "{{ `{{ .master_key }}` }}"
  data:
    - secretKey: master_key
      remoteRef:
        key: litellm_master_key

---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: litellm-provider-keys-secret
  namespace: litellm
spec:
  refreshInterval: "1h"
  secretStoreRef:
    name: gcp-store
    kind: ClusterSecretStore
  target:
    name: litellm-provider-keys
    creationPolicy: 'Owner'
    template:
      type: Opaque
      data:
        OPENAI_API_KEY: "{{ `{{ .openai_key }}` }}"
        ANTHROPIC_API_KEY: "{{ `{{ .anthropic_key }}` }}"
  data:
    - secretKey: openai_key
      remoteRef:
        key: openai_api_key
    - secretKey: anthropic_key
      remoteRef:
        key: anthropic_api_key

# ---
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: litellm-db-secret
#   namespace: litellm
# spec:
#   refreshInterval: "1h"
#   secretStoreRef:
#     name: gcp-store
#     kind: ClusterSecretStore
#   target:
#     name: litellm-db
#     creationPolicy: 'Owner'
#     template:
#       type: Opaque
#       data:
#         DATABASE_URL: "{{ `{{ .database_url }}` }}"
#   data:
#     - secretKey: database_url
#       remoteRef:
#         key: litellm_database_url
