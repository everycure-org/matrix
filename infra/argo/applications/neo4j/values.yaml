
neo4j: # the name of the helm dependency
  # see https://github.com/neo4j/helm-charts/issues/313
  # and https://github.com/neo4j/helm-charts/blob/f19b4f9f18e99442bfdd50a2e67a779d7b56ff3d/neo4j/values.yaml#L11
  disableLookups: true
  neo4j: # config level
    edition: "community"
    passwordFromSecret: neo4j-password
    name: neo4j
    resources:
      cpu: "4"
      memory: "6Gi"
  volumes:
    data:
      mode: "dynamic"
      dynamic:
        # In GKE;
        # * premium-rwo provisions SSD disks (recommended)
        # * standard-rwo provisions balanced SSD-backed disks
        # * standard provisions HDD disks
        storageClassName: premium-rwo
        # storageClassName: hyperdisk-balanced

  # FUTURE add env variables here to enable plugins for neo4j
  # https://neo4j.com/docs/operations-manual/current/kubernetes/plugins/
  env:
    NEO4J_PLUGINS: '["apoc", "graph-data-science", "apoc-extended"]'
  config:
    # NOTE: This block supports all the configuration options from the config file
    # https://neo4j.com/docs/operations-manual/current/kubernetes/configuration/#_config
    # https://neo4j.com/docs/operations-manual/current/configuration/configuration-settings/
    dbms.security.procedures.unrestricted: "gds.*, apoc.*"
    dbms.security.procedures.whitelist: "gds.*, apoc.*"
    dbms.security.allow_csv_import_from_file_urls: "true"
    # server.directories.import: /var/lib/neo4j/import
    initial.dbms.default_database: everycure

  apoc_config:
    apoc.import.file.enabled: "true"
    apoc.export.file.enabled: "true"
    apoc.import.file.use_neo4j_config: "true"