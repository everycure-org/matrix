argo-workflows:
  # baseHref: /argo-workflows/
  server: 
    extraArgs:
      - --auth-mode=server
    # Schedule server on management nodes
    nodeSelector:
      workload-type: management
    # Add billing labels to Argo Workflows server pods
    podLabels:
      cost-center: infrastructure-management
      workload-category: platform-services
      service-tier: management
      billing-category: infrastructure
      component: argo-workflows-server

  artifactRepository:
    archiveLogs: true
    gcs:
      bucket: dummy-replaced-by-helm-override-from-app-of-apps
      keyFormat: "{{ \"{{workflow.namespace}}/{{workflow.name}}/{{pod.name}}\" }}"
  
  controller:
    config:
      archiveLogs: true
      # Increase workflow size limits to handle large multi-model pipelines
      workflowDefaults:
        spec:
          # Increase max workflow size from default 1Mi to 10Mi
          maxWorkflowSize: "10Mi"
      # Enable node status offloading to external storage
      nodeStatusOffLoad: true
      offloadNodeStatusTTL: "5m"
    metricsConfig:
      enabled: true
    # Schedule controller on management nodes
    nodeSelector:
      workload-type: management
    
    # Enable ConfigMap creation permissions for memoization and caching
    rbac:
      writeConfigMaps: true

    # Add billing labels to Argo Workflows controller pods
    podLabels:
      cost-center: infrastructure-management      
      workload-category: platform-services
      service-tier: management
      billing-category: infrastructure
      component: argo-workflows-controller
