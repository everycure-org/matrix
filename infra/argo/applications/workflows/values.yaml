argo-workflows:
  # baseHref: /argo-workflows/
  server: 
    extraArgs:
      - --auth-mode=server
    # Schedule server on management nodes
    nodeSelector:
      workload-type: management
    # Add billing labels to Argo Workflows server pods
    podLabels:
      cost-center: infrastructure-management
      workload-category: platform-services
      service-tier: management
      billing-category: infrastructure
      component: argo-workflows-server

  artifactRepository:
    archiveLogs: true
    gcs:
      bucket: dummy-replaced-by-helm-override-from-app-of-apps
      keyFormat: "{{ \"{{workflow.namespace}}/{{workflow.name}}/{{pod.name}}\" }}"
  
  controller:
    persistence:
      archive: true
      postgresql:
        host: postgresql-cloudnative-pg-cluster-pooler-rw.postgresql.svc.cluster.local
        port: 5432
        database: app
        tableName: argo_workflows
        userNameSecret:
          name: argo-postgres-config
          key: username
        passwordSecret:
          name: argo-postgres-config
          key: password
    config:
      archiveLogs: true
    metricsConfig:
      enabled: true
    # Schedule controller on management nodes
    nodeSelector:
      workload-type: management

    # Add billing labels to Argo Workflows controller pods
    podLabels:
      cost-center: infrastructure-management      
      workload-category: platform-services
      service-tier: management
      billing-category: infrastructure
      component: argo-workflows-controller
