# -------------------------------------------------------------------------
# Published
# -------------------------------------------------------------------------

primary.published.drug_list:
  type: everycure.datasets.kedro.DataCatalogDataset
  dataset: drug_list
  engine: pandas
  save_args:
    catalog_args:
      version: ${globals:release_version_semver}
      message: ${globals:release_message}
      description: Drug list, generated by drug list pipeline
      location:
        format: parquet
        uri: ${globals:paths.published}/ec-drug-list.parquet
        type: gcs
      owner:
        name: Jacques Vergine
        email: jacques@everycure.org
      origin:
        url: https://github.com/everycure-org/core-entities
        system: Drug list pipeline
      tags: ["drug_list"]

primary.published.drug_list_bq:
  type: pandas.GBQTableDataset
  project: ec-orchard-prod
  dataset: drug_list
  table_name: ec_drug_list_${globals:release_version_underscore}

primary.published.drug_list_bq_latest:
  type: matrix_gcp_datasets.gcp.GBQTableDataset
  project: ec-orchard-prod
  dataset: drug_list
  table_name: ec_drug_list_latest
  label_key: release
  label_value: ${globals:release_version_underscore}
  save_args:
    if_exists: replace