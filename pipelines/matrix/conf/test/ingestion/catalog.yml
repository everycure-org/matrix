_layer_raw: &_layer_raw
  metadata:
    kedro-viz:
      layer: raw
      
ingestion.raw.disease_list:
  <<: [*_layer_raw]
  type: pandas.CSVDataset
  filepath: ${globals:paths.raw}/disease_list/translator/${globals:data_sources.disease_list.version}/source_disease_list.tsv
  save_args:
    sep: "\t"
    header: true
    index: false
  load_args:
    sep: "\t"

ingestion.raw.drug_list:
  <<: [*_layer_raw]
  type: pandas.CSVDataset
  filepath: ${globals:paths.raw}/drug_list/translator/${globals:data_sources.drug_list.version}/source_drug_list.tsv
  save_args:
    sep: "\t"
    header: true
    index: false
  load_args:
    sep: "\t"

ingestion.raw.ground_truth.positives:
  <<: [*_layer_raw]
  type: pandas.CSVDataset
  filepath: ${globals:paths.kg_raw}/ground_truth/kg2/${globals:data_sources.gt.version}/tp_pairs.txt
  load_args:
    sep: "\t"
  save_args:
    sep: "\t"

ingestion.raw.ground_truth.negatives:
  <<: [*_layer_raw]
  type: pandas.CSVDataset
  filepath: ${globals:paths.kg_raw}/ground_truth/kg2/${globals:data_sources.gt.version}/tn_pairs.txt
  load_args:
    sep: "\t"
  save_args:
    sep: "\t"

ingestion.raw.drugmech.edges@spark:
  type: matrix.datasets.gcp.LazySparkDataset
  filepath: ${globals:paths.raw}/drugmech/${globals:data_sources.drugmech.version}/indication_paths.json
  file_format: json
  load_args:
    multiline: true

# -------------------------------------------------------------------------
# RTX-KG2
# -------------------------------------------------------------------------  
ingestion.raw.rtx_kg2.curie_to_pmids@pandas:
  type: pandas.SQLTableDataset
  table_name: curie_to_pmids  
  credentials: sqlite_credentials
  save_args:
    if_exists: replace
ingestion.raw.rtx_kg2.curie_to_pmids@spark:
  type: matrix.datasets.gcp.RemoteSparkJDBCDataset
  project: ${globals:dev_gcp_project_id}
  table: curie_to_pmids
  url: sqlite:${globals:paths.kg_raw}/KGs/rtx_kg2/${globals:data_sources.rtx_kg2.version}/curie_to_pmids.sqlite
  load_args:
    properties:
      driver: org.sqlite.JDBC

ingestion.raw.rtx_kg2.nodes@pandas:
  <<: [*_pandas_csv, *_layer_raw]
  filepath: ${globals:paths.kg_raw}/KGs/rtx_kg2/${globals:data_sources.rtx_kg2.version}/rtx-kg2_2.10.0_nodes_v2-2.tsv
  load_args:
    sep: "\t"
  save_args:
    header: true
    index: false
    sep: "\t"
ingestion.raw.rtx_kg2.nodes@spark:
  <<: *_layer_raw
  type: matrix.datasets.gcp.LazySparkDataset
  filepath: ${globals:paths.kg_raw}/KGs/rtx_kg2/${globals:data_sources.rtx_kg2.version}/rtx-kg2_2.10.0_nodes_v2-2.tsv
  file_format: csv
  load_args:
    sep: "\t"
    header: true

ingestion.raw.rtx_kg2.edges@pandas:
  <<: [*_pandas_csv, *_layer_raw]
  filepath: ${globals:paths.kg_raw}/KGs/rtx_kg2/${globals:data_sources.rtx_kg2.version}/rtx-kg2_2.10.0_edges_v2-2.tsv
  save_args:
    sep: "\t"
    header: true
    index: false
  load_args:
    sep: "\t"
ingestion.raw.rtx_kg2.edges@spark:
  <<: *_layer_raw
  type: matrix.datasets.gcp.LazySparkDataset
  filepath: ${globals:paths.kg_raw}/KGs/rtx_kg2/${globals:data_sources.rtx_kg2.version}/rtx-kg2_2.10.0_edges_v2-2.tsv
  file_format: csv
  load_args:
    sep: "\t"
    header: true
  save_args:
    header: true
ingestion.int.rtx_kg2.nodes:
  <<: [*_spark_parquet, *_layer_int]
  filepath: ${globals:paths.ingestion}/int/rtx_kg2/${globals:data_sources.rtx_kg2.version}/nodes
ingestion.int.rtx_kg2.edges:
  <<: [*_spark_parquet, *_layer_int]
  filepath: ${globals:paths.ingestion}/int/rtx_kg2/${globals:data_sources.rtx_kg2.version}/edges
ingestion.int.rtx_kg2.curie_to_pmids:
  <<: [*_spark_parquet, *_layer_int]
  filepath: ${globals:paths.ingestion}/int/rtx_kg2/${globals:data_sources.rtx_kg2.version}/curie_to_pmids


# -------------------------------------------------------------------------
# Ground truth
# -------------------------------------------------------------------------  
# TODO: Remove raw suffix from all outputs of preprocessing pipeline once its in main
ingestion.raw.ground_truth.positives:
  <<: [*_layer_raw]
  type: pandas.CSVDataset
  filepath: ${globals:paths.kg_raw}/ground_truth/kg2/${globals:data_sources.gt.version}/tp_pairs.txt
  load_args:
    sep: "\t"
  save_args:
    sep: "\t"
ingestion.raw.ground_truth.negatives:
  <<: [*_layer_raw]
  type: pandas.CSVDataset
  filepath: ${globals:paths.kg_raw}/ground_truth/kg2/${globals:data_sources.gt.version}/tn_pairs.txt
  load_args:
    sep: "\t"
  save_args:
    sep: "\t"
ingestion.raw.ground_truth.edges@pandas:
  <<: [*_layer_raw]
  type: pandas.CSVDataset
  filepath: ${globals:paths.ingestion}/ground_truth/translator/${globals:data_sources.gt.version}/gt_pairs_raw.tsv
  save_args:
    sep: "\t"
    header: true
    index: false
  load_args:
    sep: "\t"
ingestion.raw.ground_truth.edges@spark:
  <<: [*_layer_raw, *_spark_csv]
  filepath: ${globals:paths.ingestion}/ground_truth/translator/${globals:data_sources.gt.version}/gt_pairs_raw.tsv
  load_args:
    sep: "\t"
    header: true
    index: false
ingestion.int.ground_truth.edges:
  <<: [*_spark_csv, *_layer_int]
  filepath: ${globals:paths.ingestion}/ground_truth/translator/${globals:data_sources.gt.version}/gt_pairs.tsv
  load_args:
    sep: "\t"
    header: true
    index: false
  save_args:
    sep: "\t"
    header: true
    index: false
    mode: overwrite
# -------------------------------------------------------------------------
# Robokop
# -------------------------------------------------------------------------  
ingestion.raw.robokop.nodes@spark:
  <<: *_layer_raw
  type: matrix.datasets.gcp.LazySparkDataset
  filepath: ${globals:paths.kg_raw}/KGs/robokop-kg/${globals:data_sources.robokop.version}/robokop-${globals:data_sources.robokop.version}_nodes.tsv
  file_format: csv
  load_args:
    sep: "\t"
    header: true
    index: false

ingestion.raw.robokop.nodes@pandas:
  <<: [*_pandas_csv, *_layer_raw]
  filepath: ${globals:paths.kg_raw}/KGs/robokop-kg/${globals:data_sources.robokop.version}/robokop-${globals:data_sources.robokop.version}_nodes.tsv
  save_args:
    sep: "\t"
    header: true
    index: false
  load_args:
    sep: "\t"
ingestion.raw.robokop.edges@spark:
  <<: *_layer_raw
  type: matrix.datasets.gcp.LazySparkDataset
  filepath: ${globals:paths.kg_raw}/KGs/robokop-kg/${globals:data_sources.robokop.version}/robokop-${globals:data_sources.robokop.version}_edges.tsv
  file_format: csv
  load_args:
    sep: "\t"
    header: true
    index: false

ingestion.raw.robokop.edges@pandas:
  <<: [*_pandas_csv, *_layer_raw]
  filepath: ${globals:paths.kg_raw}/KGs/robokop-kg/${globals:data_sources.robokop.version}/robokop-${globals:data_sources.robokop.version}_edges.tsv
  save_args:
    sep: "\t"
    header: true
    index: false
  load_args:
    sep: "\t"
ingestion.int.robokop.nodes:
   <<: [*_spark_parquet, *_layer_int]
   filepath: ${globals:paths.ingestion}/int/robokop/${globals:data_sources.robokop.version}/nodes
ingestion.int.robokop.edges:
   <<: [*_spark_parquet, *_layer_int]
   filepath: ${globals:paths.ingestion}/int/robokop/${globals:data_sources.robokop.version}/edges
# -------------------------------------------------------------------------
# SPOKE
# -------------------------------------------------------------------------
ingestion.raw.spoke.nodes@spark:
 <<: *_layer_raw
 type: matrix.datasets.gcp.LazySparkDataset
 filepath: ${globals:paths.kg_raw_private}/KGs/spoke/${globals:data_sources.spoke.version}/nodes.tsv
 file_format: csv
 load_args:
   sep: "\t"
   header: true
   index: false

ingestion.raw.spoke.nodes@pandas:
  <<: [*_pandas_csv, *_layer_raw]
  filepath: ${globals:paths.kg_raw_private}/KGs/spoke/${globals:data_sources.spoke.version}/nodes.tsv
  save_args:
    sep: "\t"
    header: true
    index: false
  load_args:
    sep: "\t"
ingestion.raw.spoke.edges@spark:
 <<: *_layer_raw
 type: matrix.datasets.gcp.LazySparkDataset
 filepath: ${globals:paths.kg_raw_private}/KGs/spoke/${globals:data_sources.spoke.version}/edges.tsv
 file_format: csv
 load_args:
   sep: "\t"
   header: true
   index: false

ingestion.raw.spoke.edges@pandas:
  <<: [*_pandas_csv, *_layer_raw]
  filepath: ${globals:paths.kg_raw_private}/KGs/spoke/${globals:data_sources.spoke.version}/edges.tsv
  save_args:
    sep: "\t"
    header: true
    index: false
  load_args:
    sep: "\t"
ingestion.int.spoke.nodes:
 <<: [*_spark_parquet, *_layer_int]
 filepath: ${globals:paths.ingestion}/int/spoke/${globals:data_sources.spoke.version}/nodes
ingestion.int.spoke.edges:
  <<: [*_spark_parquet, *_layer_int]
  filepath: ${globals:paths.ingestion}/int/spoke/${globals:data_sources.spoke.version}/edges
# -------------------------------------------------------------------------
# Embiology
# -------------------------------------------------------------------------
ingestion.raw.embiology.nodes@spark:
  <<: [*_spark_parquet, *_layer_raw]
  type: matrix.datasets.gcp.LazySparkDataset
  filepath: ${globals:paths.kg_raw_private}/KGs/embiology/${globals:data_sources.embiology.version}/nodes.parquet

ingestion.raw.embiology.nodes@pandas:
  <<: [*_pandas_parquet, *_layer_raw]
  filepath: ${globals:paths.kg_raw_private}/KGs/embiology/${globals:data_sources.embiology.version}/nodes.parquet

ingestion.raw.embiology.edges@spark:
  <<: [*_spark_parquet, *_layer_raw]
  type: matrix.datasets.gcp.LazySparkDataset
  filepath: ${globals:paths.kg_raw_private}/KGs/embiology/${globals:data_sources.embiology.version}/edges.parquet

ingestion.raw.embiology.edges@pandas:
  <<: [*_pandas_parquet, *_layer_raw]
  filepath: ${globals:paths.kg_raw_private}/KGs/embiology/${globals:data_sources.embiology.version}/edges.parquet

ingestion.int.embiology.nodes:
  <<: [*_spark_parquet, *_layer_int]