_spark_parquet_ds: &_spark_parquet
  type: matrix.datasets.gcp.LazySparkDataset
  file_format: parquet
  save_args:
    mode: overwrite

_pandas_parquet: &_pandas_csv
  type: pandas.CSVDataset

_spark_csv: &_spark_csv
  type: spark.SparkDataset
  file_format: csv
  load_args:
    header: True
  save_args:
    mode: overwrite

_layer_int: &_layer_int
  metadata:
    kedro-viz:
      layer: integration
_layer_prm: &_layer_prm
  metadata:
    kedro-viz:
      layer: primary

# -------------------------------------------------------------------------
# Datasets
# -------------------------------------------------------------------------

integration.raw.biolink.predicates:
  type: kedro_datasets.json.JSONDataset
  filepath: https://biolink.github.io/biolink-model/predicates.json

integration.prm.biolink.hierarchy@pandas:
  <<: [*_pandas_csv, *_layer_prm]
  filepath: ${globals:paths.prm}/biolink_hierarchy.csv

integration.prm.biolink.hierarchy@spark:
  <<: [*_spark_csv, *_layer_prm]
  filepath: ${globals:paths.prm}/biolink_hierarchy.csv

integration.int.{source}.nodes:
  <<: [*_spark_parquet, *_layer_int]
  filepath: ${globals:paths.int}/{source}/nodes

integration.int.{source}.edges:
  <<: [*_spark_parquet, *_layer_int]
  filepath: ${globals:paths.int}/{source}/edges


# Normalized KGs
integration.int.{source}.nodes.norm:
  <<: [*_spark_parquet, *_layer_int]
  filepath: ${globals:paths.int}/{source}/nodes.norm

integration.int.{source}.edges.norm:
  <<: [*_spark_parquet, *_layer_int]
  filepath: ${globals:paths.int}/{source}/edges.norm

# mapping tables 
integration.int.{source}.nodes_norm_mapping:
  <<: [*_spark_parquet, *_layer_int]
  filepath: ${globals:paths.int}/{source}/nodes_norm_mapping


# Unified KGs
integration.prm.unified_edges:
  <<: [*_spark_parquet, *_layer_prm]
  filepath: ${globals:paths.prm}/unified/edges

integration.prm.unified_nodes:
  <<: [*_spark_parquet, *_layer_prm]
  filepath: ${globals:paths.prm}/unified/nodes
