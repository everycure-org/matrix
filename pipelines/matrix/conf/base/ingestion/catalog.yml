_pandas_csv: &_pandas_csv
  type: pandas.CSVDataset

_bigquery_ds: &_bigquery_ds
  type: matrix.datasets.gcp.BigQueryTableDataset
  project_id: ${globals:gcp_project}

ingestion.raw.robokop_kg.edges@pandas:
  <<: *_pandas_csv
  filepath: ${globals:paths.raw}/robokop_kg/${globals:data_sources.robokop_kg.version}/edges.tsv
  load_args:
    sep: "\t"

ingestion.int.robokop_kg.edges@spark:
  <<: *_bigquery_ds
  dataset: "kg_robokop"
  table: "edges_test"
  save_args:
    temporaryGcsBucket: ${globals:gcs_bucket}
    bigQueryTableLabel.kg: robokop
    bigQueryTableLabel.release: ${globals:versions.release}

ingestion.int.robokop_kg.edges@pandas:
  <<: *_pandas_csv
  filepath: ${globals:paths.int}/robokop_kg/${globals:data_sources.robokop_kg.version}/edges.tsv
  load_args:
    sep: "\t"
  save_args:
    index: False
    date_format: '%Y-%m-%d %H:%M'
    decimal: .
    sep: "\t"

ingestion.raw.robokop_kg.nodes@pandas:
  <<: *_pandas_csv
  filepath: ${globals:paths.raw}/robokop_kg/${globals:data_sources.robokop_kg.version}/nodes.tsv
  load_args:
    sep: "\t"

ingestion.int.robokop_kg.nodes@spark:
  <<: *_bigquery_ds
  dataset: "kg_robokop"
  table: "nodes_test"
  save_args:
    temporaryGcsBucket: ${globals:gcs_bucket}
    bigQueryTableLabel.kg: robokop
    bigQueryTableLabel.release: ${globals:versions.release}

ingestion.int.robokop_kg.nodes@pandas:
  <<: *_pandas_csv
  filepath: ${globals:paths.int}/robokop_kg/${globals:data_sources.robokop_kg.version}/nodes.tsv
  load_args:
    sep: "\t"
  save_args:
    index: False
    date_format: '%Y-%m-%d %H:%M'
    decimal: .
    sep: "\t"
