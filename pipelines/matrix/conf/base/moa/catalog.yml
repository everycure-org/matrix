_spark_parquet_ds: &_spark_parquet
  type: matrix.datasets.gcp.LazySparkDataset
  file_format: parquet
  save_args:
    mode: overwrite
  metadata:
    kedro-viz:
      layer: embeddings

_pandas_parquet: &_pandas_parquet
  type: matrix.datasets.graph.PandasParquetDataset



moa.int.paths@partitioned:
  type: matrix.datasets.gcp.PartitionedAsyncParallelDataset
  path: ${globals:paths.tmp}/int/paths
  dataset: 
    <<: *_pandas_parquet
  filename_suffix: ".parquet"

moa.int.paths@spark:
  type: matrix.datasets.gcp.SparkWithSchemaDataset
  load_args:
    schema:
      object: pyspark.sql.types.StructType
      fields:
        - object: pyspark.sql.types.StructField
          name: nodes
          dataType: 
            object: pyspark.sql.types.StringType
        - object: pyspark.sql.types.StructField
          name: labels
          dataType: 
            object: pyspark.sql.types.StringType
        - object: pyspark.sql.types.StructField
          name: rels
          dataType: 
            object: pyspark.sql.types.StringType
  save_args:
    mode: overwrite
  filepath: ${globals:paths.tmp}/int/paths