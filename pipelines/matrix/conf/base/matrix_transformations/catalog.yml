_spark_parquet_ds: &_spark_parquet
  type: matrix_gcp_datasets.gcp.LazySparkDataset
  file_format: parquet
  save_args:
    mode: overwrite

_pandas_parquet: &_pandas_parquet
  type: matrix.datasets.graph.PandasParquetDataset
  save_args:
    engine: pyarrow
  load_args:
    engine: pyarrow

### -------- Single model version --------\

# matrix_transformations.fold_{fold}.model_output.sorted_matrix_predictions@spark:
#   <<: *_spark_parquet
#   filepath: ${globals:paths.matrix_transformations}/fold_{fold}/transformed_matrix

# matrix_transformations.fold_{fold}.model_output.sorted_matrix_predictions@pandas:
#   <<: *_pandas_parquet
#   filepath: ${globals:paths.matrix_transformations}/fold_{fold}/transformed_matrix

# matrix_transformations.full_matrix_output@spark:
#   <<: *_spark_parquet
#   filepath: ${globals:paths.matrix_transformations}/full_matrix_output

### -------- Single model version --------

### -------- Multi model version --------

matrix_transformations.fold_{fold}.{model_name}.model_output.sorted_matrix_predictions@spark:
  <<: *_spark_parquet
  filepath: ${globals:paths.matrix_transformations}/{model_name}/fold_{fold}/transformed_matrix

matrix_transformations.fold_{fold}.{model_name}.model_output.sorted_matrix_predictions@pandas:
  <<: *_pandas_parquet
  filepath: ${globals:paths.matrix_transformations}/{model_name}/fold_{fold}/transformed_matrix


matrix_transformations.{model_name}.full_matrix_output@spark:
  <<: *_spark_parquet
  filepath: ${globals:paths.matrix_transformations}/{model_name}/full_matrix_output

### -------- Multi model version --------