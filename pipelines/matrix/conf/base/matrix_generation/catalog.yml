_pandas_parquet: &_pandas_parquet
  type: matrix.datasets.graph.PandasParquetDataset
  save_args:
    engine: pyarrow
  load_args:
    engine: pyarrow

_spark_parquet_ds: &_spark_parquet
  type: matrix.datasets.gcp.LazySparkDataset
  file_format: parquet
  save_args:
    mode: overwrite

_kg_dataset: &_kg_dataset
  type: matrix.datasets.graph.KnowledgeGraphDataset
  load_args:
    engine: pyarrow
    use_nullable_dtypes: True

matrix_generation.feat.nodes@spark:
  <<: *_spark_parquet
  filepath: ${globals:paths.matrix_generation}/feat/matrix_nodes_spark

matrix_generation.feat.nodes@kg:
  <<: *_kg_dataset
  filepath: ${globals:paths.matrix_generation}/feat/matrix_nodes_spark

"matrix_generation.prm.fold_{fold}.matrix_pairs":
  <<: *_pandas_parquet
  filepath: ${globals:paths.matrix_generation}/prm/fold_{fold}/matrix_pairs

"matrix_generation.fold_{fold}.model_output.sorted_matrix_predictions@pandas":
  <<: *_pandas_parquet
  filepath: ${globals:paths.matrix_generation}/model_output/fold_{fold}/matrix_predictions

"matrix_generation.fold_{fold}.reporting.matrix_report":
  filepath: ${globals:paths.matrix_generation}/fold_{fold}/matrix_report_${globals:run_name}.xlsx
  type: pandas.ExcelDataset
  
