_pandas_parquet: &_pandas_parquet
  type: pandas.ParquetDataset

_spark_parquet_ds: &_spark_parquet
  type: matrix.datasets.gcp.LazySparkDataset
  file_format: parquet
  save_args:
    mode: overwrite

_kg_dataset: &_kg_dataset
  type: matrix.datasets.graph.KnowledgeGraphDataset
  load_args:
    engine: pyarrow
    use_nullable_dtypes: True

matrix_generation.feat.nodes@spark:
  <<: *_spark_parquet
  filepath: ${globals:paths.feat}/matrix_nodes_spark

matrix_generation.feat.nodes_kg_ds:
  <<: *_kg_dataset
  filepath: ${globals:paths.feat}/matrix_nodes_kg

matrix_generation.prm.matrix_pairs:
  <<: *_pandas_parquet
  filepath: ${globals:paths.prm}/matrix_pairs

"matrix_generation.{model}.model_output.sorted_matrix_predictions@pandas":
  <<: *_pandas_parquet
  filepath: ${globals:paths.model_output}/{model}/matrix_predictions

"matrix_generation.{model}.model_output.sorted_matrix_predictions@spark":
  <<: *_spark_parquet
  filepath: ${globals:paths.model_output}/{model}/matrix_predictions

"matrix_generation.{model}.reporting.matrix_report":
  filepath: ${globals:paths.reporting}/{model}/matrix_report
  type: pandas.CSVDataset