_kg_paths_dataset: &_kg_paths_dataset
  type: matrix.datasets.paths.KGPathsDataset
  load_args:
    engine: pyarrow

# Raw datasets

moa_extraction.raw.drug_mech_db:
  type: yaml.YAMLDataset
  filepath: ${globals:paths.raw}/moa_extraction/drugmechdb/${globals:data_sources.drugmechdb.version}/indication_paths.yaml

moa_extraction.raw.pairs_for_moa_prediction:
  type: pandas.CSVDataset
  filepath: ${globals:paths.raw}/moa_extraction/input_pairs/${globals:data_sources.pairs_for_moa_prediction.version}/filtered_matrix_report_xg_ensemble_report_17_sept_2024.csv

moa_extraction.raw.drugmechdb_entities:
  type: pandas.ParquetDataset
  filepath: ${globals:paths.raw}/moa_extraction/drugmechdb_entities/drugmechdb_entities.parquet

# Intermediate and output datasets

moa_extraction.feat.category_encoder:
  type: pickle.PickleDataset
  filepath: ${globals:paths.moa_extraction}/feat/category_encoder.pickle

moa_extraction.feat.relation_encoder:
  type: pickle.PickleDataset
  filepath: ${globals:paths.moa_extraction}/feat/relation_encoder.pickle

"moa_extraction.int.{num_hops}_hop_indication_paths":
  <<: *_kg_paths_dataset
  filepath: ${globals:paths.moa_extraction}/int/{num_hops}_hop_indication_paths.parquet

"moa_extraction.prm.{num_hops}_hop_splits":
  <<: *_kg_paths_dataset
  filepath: ${globals:paths.moa_extraction}/prm/{num_hops}_hop_split.parquet

"moa_extraction.feat.{num_hops}_hop_enriched_paths":
  <<: *_kg_paths_dataset
  filepath: ${globals:paths.moa_extraction}/feat/{num_hops}_hop_enriched_paths.parquet

"moa_extraction.models.{num_hops}_hop_model":
  type: pickle.PickleDataset
  filepath: ${globals:paths.moa_extraction}/models/{num_hops}_hop_model.pickle

"moa_extraction.models.{num_hops}_hop_model_split":
  type: pickle.PickleDataset
  filepath: ${globals:paths.moa_extraction}/models/{num_hops}_hop_model_split.pickle

"moa_extraction.model_output.{num_hops}_hop_evaluation_predictions":
  type: partitions.PartitionedDataset
  path: ${globals:paths.moa_extraction}/model_output/{num_hops}_hop_evaluation_predictions
  dataset: matrix.datasets.paths.KGPathsDataset
  load_args:
    engine: pyarrow

"moa_extraction.reporting.{num_hops}_hop_metrics":
  filepath: ${globals:paths.moa_extraction}/reporting/{num_hops}_hop_metrics
  type:  yaml.YAMLDataset

"moa_extraction.model_output.{num_hops}_hop_output_predictions":
  type: partitions.PartitionedDataset
  path: ${globals:paths.moa_extraction}/model_output/{num_hops}_hop_output_predictions
  dataset: matrix.datasets.paths.KGPathsDataset
  load_args:
    engine: pyarrow

"moa_extraction.reporting.{num_hops}_hop_predictions_report":
  type: partitions.PartitionedDataset
  path: ${globals:paths.moa_extraction}/reporting/{num_hops}_hop_predictions_report
  dataset: pandas.ExcelDataset 