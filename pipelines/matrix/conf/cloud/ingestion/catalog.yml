_bigquery_ds: &_bigquery_ds
  type: matrix.datasets.gcp.BigQueryTableDataset
  project_id: ${oc.env:GCP_PROJECT_ID}

# -------------------------------------------------------------------------
# Datasets
# -------------------------------------------------------------------------

# overwriting the base catalog to use the bigquery datasets
ingestion.int.rtx_kg2.nodes:
  <<: *_bigquery_ds
  dataset: kg_rtx_kg2
  table: nodes
  identifier: "${globals:data_sources.rtx-kg2.version}"
  save_args: 
    temporaryGcsBucket: ${globals:gcs_bucket}
    bigQueryTableLabel.kg: rtx_kg2
    bigQueryTableLabel.git_sha: ${globals:git_sha}

ingestion.int.rtx_kg2.edges:
  <<: *_bigquery_ds
  dataset: kg_rtx_kg2
  table: edges
  identifier: "${globals:data_sources.rtx-kg2.version}"
  save_args: 
    temporaryGcsBucket: ${globals:gcs_bucket}
    bigQueryTableLabel.kg: rtx_kg2
    bigQueryTableLabel.git_sha: ${globals:git_sha}


# TODO: Revert after moving raw
ingestion.raw.robokop.nodes@spark:
  type: matrix.datasets.gcp.LazySparkDataset
  filepath: gs://mtrx-us-central1-hub-dev-storage/data/01_RAW/KGs/robokop-kg/${globals:data_sources.robokop.version}/nodes.tsv
  file_format: csv
  load_args:
    sep: "\t"
    header: true
    index: false

# TODO: Revert after moving raw
ingestion.raw.robokop.edges@spark:
  type: matrix.datasets.gcp.LazySparkDataset
  filepath: gs://mtrx-us-central1-hub-dev-storage/data/01_RAW/KGs/robokop-kg/${globals:data_sources.robokop.version}/edges.tsv
  file_format: csv
  load_args:
    sep: "\t"
    header: true
    index: false

ingestion.int.robokop.nodes:
  <<: *_bigquery_ds
  dataset: robokop_kg
  table: nodes
  identifier: "${globals:data_sources.robokop.version}"
  save_args:
    temporaryGcsBucket: ${globals:gcs_bucket}
    bigQueryTableLabel.kg: robokop
    bigQueryTableLabel.git_sha: ${globals:git_sha}

ingestion.int.robokop.edges:
  <<: *_bigquery_ds
  dataset: robokop_kg
  table: edges
  identifier: "${globals:data_sources.robokop.version}"
  save_args:
    temporaryGcsBucket: ${globals:gcs_bucket}
    bigQueryTableLabel.kg: robokop
    bigQueryTableLabel.git_sha: ${globals:git_sha}

# overwriting the base catalog to use the bigquery datasets
ingestion.int.ec_medical_team.nodes:
  <<: *_bigquery_ds
  dataset: kg_ec_medical_team
  table: nodes
  identifier: "${globals:data_sources.ec-medical-team.version}"
  save_args:
    temporaryGcsBucket: ${globals:gcs_bucket}
    bigQueryTableLabel.kg: ec_medical_team
    bigQueryTableLabel.git_sha: ${globals:git_sha}

ingestion.int.ec_medical_team.edges:
  <<: *_bigquery_ds
  dataset: kg_ec_medical_team
  table: edges
  identifier: "${globals:data_sources.ec-medical-team.version}"
  save_args:
    temporaryGcsBucket: ${globals:gcs_bucket}
    bigQueryTableLabel.kg: ec_medical_team
    bigQueryTableLabel.git_sha: ${globals:git_sha}
