_bigquery_ds: &_bigquery_ds
  type: matrix.datasets.gcp.BigQueryTableDataset
  project_id: ${oc.env:GCP_PROJECT_ID}

modelling.raw.nodes:
  <<: *_bigquery_ds
  dataset: modelling
  table: "nodes_${globals:versions.release}"
  save_args:
    temporaryGcsBucket: ${globals:gcs_bucket}
    bigQueryTableLabel.kg: EC
    bigQueryTableLabel.release: ${globals:versions.release}
  # TODO filter these either in node or through intermediate table
  #load_args:
  #  query: >  
  #    MATCH (n:Entity) 
  #    WHERE n:Drug OR n:Disease
  #    RETURN 
  #      n.id AS id, 'biolink:' + labels(n)[1] AS category, 
  #      n.topological_embedding AS embedding

modelling.raw.edges:
  <<: *_bigquery_ds
  dataset: modelling
  table: "edges_${globals:versions.release}"
  save_args:
    temporaryGcsBucket: ${globals:gcs_bucket}
    bigQueryTableLabel.kg: EC
    bigQueryTableLabel.release: ${globals:versions.release}

